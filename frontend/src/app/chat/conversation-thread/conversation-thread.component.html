<div class="channel w-100">

  <div style="height: 3rem; position: relative; top:0; left: 0; width: 100%; z-index:1000"
       class="border-bottom bg-primary">
    <a class="btn btn-light mt-1 ml-1" [routerLink]="'/messages'">
      ðŸ¡ 
    </a>

  </div>


  <div class="a-thread py-2 w-100" style="height: calc(100vh)">

    <div class="messages">
      <ng-container *ngIf="displayElements$ | async; let displayElements">
        <ng-container *ngFor="let displayElement of displayElements;">
          <ng-container *ngIf="displayElement.type === 'userMessages'">
            <div class="message" *ngFor="let message of displayElement.messages">

              <div class="d-flex flex-row">
                <div class="mr-2">
                  <a class="sender" [routerLink]="'/users/' + message.userId">
                <span class="badge badge-secondary"
                      style="width: 2rem; height: 2rem; padding-top:0.65rem; margin-left: 1rem">{{message.sentByUsername.substr(0, 1).toUpperCase()}}</span>
                  </a>
                </div>

                <div class="margin-left:1rem flex-grow-1">

                  <div class="d-flex flex-row">

                    <a class="sender text-dark" style="font-size: 0.85rem" [routerLink]="'/users/' + message.userId">
                      {{message.sentByUsername}}
                    </a>&nbsp;

                    <small class="sent-at text-muted" style="font-size: 0.75rem">
                      {{message.sentAtDate | date:'h:mmaaa'}}
                    </small>

                  </div>

                  <div>
                    <app-blocks [message]="message"></app-blocks>
                  </div>

                </div>

              </div>


            </div>
          </ng-container>

          <div class="message-date d-relative" *ngIf="displayElement.type === 'date'">
            <div class="badge badge-pill badge-light border">{{displayElement.dateStr }}</div>
          </div>


        </ng-container>
      </ng-container>
    </div>
  </div>


  <div class="input-section px-3 mb-3" style="position:relative; bottom: 0; left: 0; height: 2.5rem; z-index: 1000">
    <div class="textarea-container">
      <textarea class="form-control" [(ngModel)]="content" (keydown.enter)="sendMessage($event)"></textarea>
      <div class="send">
        <button class="btn btn-primary ml-2" (click)="sendMessage($event)">
          <app-arrow-right></app-arrow-right>
        </button>
      </div>
    </div>
  </div>

</div>
