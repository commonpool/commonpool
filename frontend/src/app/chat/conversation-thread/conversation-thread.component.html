<div class="a-thread">
  <div class="input-section">
    <div class="textarea-container">
      <textarea class="form-control" [(ngModel)]="content" (keydown.enter)="sendMessage($event)"></textarea>
      <div class="send">
        <button class="btn btn-primary ml-2" (click)="sendMessage($event)">
          <app-arrow-right></app-arrow-right>
        </button>
      </div>
    </div>
  </div>
  <div class="messages">
    <ng-container *ngIf="displayElements$ | async; let displayElements">
      <ng-container *ngFor="let displayElement of displayElements;">
        <ng-container *ngIf="displayElement.type === 'userMessages'">
          <div class="message" *ngFor="let message of displayElement.messages">

            <div class="header">
              <a class="sender" [routerLink]="'/users/' + message.userId">
              <span class="badge badge-secondary"
                    style="width: 1.25rem">{{message.sentByUsername.substr(0, 1).toUpperCase()}}</span>
              </a>&nbsp;

              <a class="sender text-dark" style="font-size: 0.85rem" [routerLink]="'/users/' + message.userId">
                {{message.sentByUsername}}
              </a>&nbsp;

              <small class="sent-at text-muted" style="font-size: 0.75rem">
                {{message.sentAtDate | date:'h:mmaaa'}}
              </small>
            </div>

            <div style="margin-left: 1.75rem">
              <app-blocks [message]="message"></app-blocks>
            </div>

          </div>
        </ng-container>

        <div class="message-date d-relative" *ngIf="displayElement.type === 'date'">
          <div class="badge badge-pill badge-light border" >{{displayElement.dateStr }}</div>
        </div>


      </ng-container>
    </ng-container>
  </div>
</div>
